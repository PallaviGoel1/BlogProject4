{% extends 'base.html' %}

{% block title %}{{ post.title }}{% endblock %}


{% block content %}

<div class="masthead">
    <div class="container">
        <div class="row g-0">
            <div class="col-md-6 masthead-text">
                <!-- Post title goes in these h1 tags -->
                <h1 class="post-title">{{ post.title }}</h1>
                <!-- Post author goes before the | the post's created date goes after -->
                <p class="post-subtitle">{{ post.author }} | {{ post.date }}</p>
            </div>
            {% if user.is_authenticated %}
            <p class="card-text"><a href="{% url 'update_post' post.pk %} ">(Edit)</a>
                <a href="{% url 'delete_post' post.pk %} ">(Delete)</a></p>

            {% endif %}
            <div class="d-none d-md-block col-md-6 masthead-image">
                <!-- The featured image URL goes in the src attribute -->
                {% if "placeholder" in post.featured_image.url %}
                    <img src="https://www.bertelsmann-stiftung.de/fileadmin/files/_processed_/a/c/csm_Fotolia_64336912_X_Original_41023_d2446515ba.jpg" width="100%">
                {% else %}
                    <img src=" {{ post.featured_image.url }}" width="100%">
                <br/>
                {% endif %}
                {{ post.body | safe}}
            </div>
        </div>
    </div>
</div>
    <br>
    <br/>
    <a href="{% url 'home' %}" class="btn btn-primary float-end">Back</a>

    {% if user.is_authenticated %}
    <form class="d-inline" action ="{% url 'like_post' post.pk %}" method="post">
        {% csrf_token %}
    
        {% if liked %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="fas fa-heart">
                Unlike
            </button>
        {% else %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="fas fa-heart">
                Like
            </button>
        {% endif %}
    </form>
    {% else %}  
    <a href="{% url 'login' %}">Login</a>
        Please logged for Like......
    {% endif %}

    <span class="text-secondary">{{ post.total_likes }} </span>
   <br>
   <br>
   <hr>
   <h3>Comments...</h3>
    
    {% if not post.comments.all %}

        No Comments yet... <a href="{% url 'comment' post.pk %}">Add One</a>

    {% else %}

       

        {% for comment in post.comments.all %}
            <strong>   
                {{ comment.name }} -
                {{ comment.date }}
            </strong> 
            <br/>
                {{ comment.body }}
            <br/>
            <br/>
            <a href="{% url 'comment' post.pk %}">Add Comments</a>
        {% endfor %}
    {% endif %}
    <br/>
   

    <hr>
</div>
<br/>

{% endblock %}