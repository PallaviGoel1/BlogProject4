{% extends 'base.html' %}
{% load static %}
{% block title %}{{ post.title }}{% endblock %}


{% block content %}



<h1> {{ post.title }} </h1>
<small>By: {{ post.author.first_name }} {{ post.author.last_name }} -  
    {{ post.date }}

    {% if user.is_authenticated %}
       - <a href="{% url 'update_post' post.pk %} ">(Edit)</a> 
       - <a href="{% url 'delete_post' post.pk %} ">(Delete)</a>

    {% endif %}
    </small> <br/>
<br>
<br/>
{{ post.body | safe}}

<br>
<br/>
<hr>
<a href="{% url 'home' %}" class="btn btn-secondary">Back</a>
<br>
<br/>
<form action ="{% url 'like_post' post.pk %}" method="post">
    {% csrf_token %}
    {% if user.is_authenticated %}
        {% if liked %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="fas fa-heart">
                Unlike
            </button>
        {% else %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="fas fa-heart">
                Like
            </button>
        {% endif %}
    {% else %}  
    <a href="{% url 'login' %}">Login</a>
        Please logged for Like   
    {% endif %}

        - {{ total_likes }}
    
</form></strong>
    </div>
    <h3>Comments...</h3>

    {% if not post.comments.all %}
        No Comments yet...<a href="#">Add Comments</a>
    {% else %}
        {% for comment in post.comments.all %}
            <strong>   
                {{ comment.name }} -
                {{ comment.date }}
            </strong> 
            <br/>
                {{ comment.body }}
            <br/>
            <hr>
        {% endfor %}
    {% endif %}


</div>
<br/>

{% endblock %}